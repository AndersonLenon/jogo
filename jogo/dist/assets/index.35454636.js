(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function l(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=l(n);fetch(n.href,s)}})();let A=[];function G(e){e.addEventListener("keydown",H),e.addEventListener("keyup",$)}const c=e=>A.includes(e);function H(e){c(e.key)||A.push(e.key)}function $(e){A=A.filter(o=>o!==e.key)}const L=async e=>new Promise(o=>{const l=new Image;l.addEventListener("load",()=>o(l)),l.src=e}),x=async e=>new Promise(o=>{const l=new Audio(e);l.addEventListener("canplaythrough",()=>o(l))});let a,r;const J=60;let U,F,K,T,X=null,S=null,v=null,w=0,h=0,k=0,P=0,N=50,m=50,R=4,_=0,d=0,Z=5,p=0;const b=10;let Y=0;const y=20,z=100,Q=20,W=20,B=1,C=1,ee=2e3,te=5e3,oe=.01;let M=!1,I=0;const ie=15,ne=.8,E=200;let t={x:w,y:h,width:70,height:70,life:z},f=[],g=[],V=!1,O=0,q=0;const le=async()=>{r=document.querySelector("canvas"),a=r.getContext("2d"),X=await L("img/personagem.png"),v=await L("img/grama.jpg"),S=await L("img/nuvens.png"),U=await x("sounds/gameover.mp3"),F=await x("sounds/inimigo.mp3"),K=await x("sounds/vida.mp3"),T=await x("sounds/tema.mp3"),T.loop=!0,T.play(),w=r.width/2-N/2,h=r.height-E-m,t.x=w,t.y=h,G(r),j()},D=(e,o,l,i,n)=>{let s=o%i;s>0&&(s-=i);for(let u=0;u<=r.width/i+1;u++)a.drawImage(e,s+u*i,l,i,n)},se=()=>{if(f.length===0){const e=r.width,o=r.height/2-30;f.push({x:e,y:o,width:30,height:30})}},re=()=>{const e=r.width,o=r.height-E-y-Math.random()*(r.height-E-y);g.push({x:e,y:o,width:y,height:y})},ae=()=>{a.fillStyle="red",f.forEach(e=>{a.fillRect(e.x,e.y,e.width,e.height)})},ce=()=>{a.fillStyle="green",g.forEach(e=>{a.fillRect(e.x,e.y,e.width,e.height)})},de=()=>{a.fillStyle="black",a.font="20px Arial",a.fillText(`Score: ${Y}`,r.width-100,20)},he=()=>{a.fillStyle="black",a.font="20px Arial",a.fillText(`Vida: ${t.life}`,10,20)},fe=()=>{f.forEach((e,o)=>{t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y&&t.y+t.height>e.y+e.height/2&&(t.life=Math.max(0,t.life-Q),f.splice(o,1),F.play()),t.y+t.height<=e.y&&t.x+t.width>e.x&&t.x<e.x+e.width&&Y++}),g.forEach((e,o)=>{t.x<e.x+e.width&&t.x+t.width>e.x&&t.y+t.height>e.y&&t.y<e.y+e.height&&t.y+t.height>e.y+y/2&&(t.life=Math.min(100,t.life+W),g.splice(o,1),K.play())})},ue=()=>{if(V){U.play();return}let e=!1,o=Z;c("Shift")&&(o*=2,p++,p>=b&&(d=d<R-1?d+1:0,p=0)),c("ArrowRight")&&(k-=o,P-=o/5,_=3,e=!0),c("ArrowLeft")&&(k+=o,P+=o/5,_=1,e=!0),e?(p++,p>=b&&(d=d<R-1?d+1:0,p=0)):d=0,M?(h-=I,I-=ne,h>=r.height-E-m&&(h=r.height-E-m,M=!1,I=0)):c(" ")&&(M=!0,I=ie),t.x=w,t.y=h;const l=Date.now();l-O>ee&&(se(),O=l),l-q>te&&Math.random()<oe&&(re(),q=l),f.forEach(i=>{c("ArrowRight")?i.x-=o*B:c("ArrowLeft")&&(i.x+=o*B)}),g.forEach(i=>{c("ArrowRight")?i.x-=o*C:c("ArrowLeft")&&(i.x+=o*C)}),f=f.filter(i=>i.x+i.width>0),g=g.filter(i=>i.x+i.width>0),fe(),t.life<=0&&(V=!0,alert("Game Over!"))},j=()=>{setTimeout(()=>{ue(),D(S,P,0,S.width,220,S.height),D(v,k,200,v.width,v.height),a.drawImage(X,_*N,d*m,N,m,w,h,70,70),ae(),ce(),he(),de(),requestAnimationFrame(j)},1e3/J)};document.getElementById("startButton").addEventListener("click",()=>{document.getElementById("menu").style.display="none",document.querySelector("canvas").style.display="block",le()});document.getElementById("instructionsButton").addEventListener("click",()=>{alert("Use as setas do teclado para mover o personagem e use espa\xE7o para pular os quadrados vermelhos. Colete os quadrados verdes para coletar vida.")});document.getElementById("exitButton").addEventListener("click",()=>{window.close()});
